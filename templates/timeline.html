{% extends 'includes/_base.html' %}

{% block js %}
<script type="text/javascript">
$(function() {
    $('.has_enddate').click(function() {
        $('.end_date').toggleClass('hidden');
    })

    var vlogs = new Vue({
        el: '#vue_app',
        delimiters: ["[[", "]]"],
        data: {
            q: '',
            logs: {{ timeline|safe }}
        },
        computed: {
            filteredLogs() {
                var self = this
                return this.logs.filter(function(log) {
                    return (
                        (log.body.toLowerCase().indexOf(self.q.toLowerCase()) > -1)
                    )
                })
            }
        }
    })
})
</script>
{% endblock %}

{% block content %}
<div class="col-md-8">
    <div class="timeline-centered" id="main_timeline">

        <article class="timeline-entry" v-for="log in filteredLogs">
            <div class="timeline-entry-inner">

                <div class="timeline-icon" v-bind:class="{ 'bg-secondary': log.reminder }">
                    <span class="glyphicon" v-bind:class="'glyphicon-' + [[ log.kind__glyphicon_name ]]" aria-hidden="true"></span>
                </div>

                <div class="timeline-label">
                    <div class="log_date">[[ log.start_date ]]</div>
                    <p>[[ log.body ]]</p>
                </div>
            </div>
        </article>

        <article class="timeline-entry begin">
            <div class="timeline-entry-inner">
                <div class="timeline-icon bg-black" style="background: #333;">
                </div>
            </div>
        </article>

    </div>
</div>
<div class="col-md-4">
    <h3>New log!</h3>
    <form>
        <div class="form-group">
            <label for="exampleInputEmail1">What?</label>
            <input type="text" class="form-control" id="exampleInputEmail1" placeholder="">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">When?</label>
            <input type="text" class="form-control" id="exampleInputPassword1" placeholder="dd/mm/yyyy hh:mm">
        </div>
        <div class="checkbox">
            <label>
            <input class="has_enddate" type="checkbox"> End date?
            </label>
        </div>
        <div class="form-group end_date hidden">
            <label for="exampleInputPassword1">When?</label>
            <input type="text" class="form-control" id="exampleInputPassword1" placeholder="dd/mm/yyyy hh:mm">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword1">Description...</label>
            <textarea class="form-control mention" rows="3"></textarea>
        </div>
        <div class="checkbox">
            <label>
              <input type="checkbox"> Reminder?
            </label>
        </div>
        <br />
        <button type="submit" class="btn btn-primary">Log...</button>
    </form>

</div>
{% endblock %}